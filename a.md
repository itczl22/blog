**MySQL架构图：**
&emsp; ![3ca85789bdcb1d573b7d19804fad5874.png](en-resource://database/2667:1)

**MySQL 可以分为 Server 层和存储引擎层两部分：**

* Server 层包括：

1. 连接器、查询缓存、分析器、优化器、执行器等，涵盖 MySQL 的大多数核心服务功能，以及所有的内置函数（如日期、时间、数学和加密函数等）
2.  所有跨存储引擎的功能都在这一层实现，比如存储过程、触发器、视图等。

* 存储引擎层：
 
1. 负责数据的存储和提取。其架构模式是插件式的，支持 InnoDB、MyISAM、Memory 等多个存储引擎。
2. 现在最常用的存储引擎是 InnoDB，它从 MySQL 5.5.5 版本开始成为了默认存储引擎。

&emsp;从图中不难看出，不同的存储引擎共用一个Server 层，也就是从连接器到执行器的部分。

**连接器：**

* 第一步，你会先连接到这个数据库上，这时候接待你的就是连接器。连接器负责跟客户端建立连接、获取权限、维持和管理连接  
连接命令一般是这么写的： mysql -h $ip -P $port -u $user -p

* 连接命令中的 mysql 是客户端工具，用来跟服务端建立连接。  
在完成经典的 TCP 握手后，连接器就要开始认证你的身份，这个时候用的就是你输入的用户名和密码。  
如果用户名或密码不对，你就会收到一个"Access denied for user"的错误，然后客户端程序结束执行。   
如果用户名密码认证通过，连接器会到权限表里面查出你拥有的权限。之后，这个连接里面的权限判断逻辑，都将依赖于此时读到的权限。
